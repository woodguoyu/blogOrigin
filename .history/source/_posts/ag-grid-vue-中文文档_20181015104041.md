---
title: ag-grid-vue 中文文档
date: 2018-10-15 09:49:50
tags: [vue,ag-grid]
---
<link rel="stylesheet" href="https://at.alicdn.com/t/font_798158_wn4udd6bx9.css">

[ ag-grid-vue 官方文档](https://www.ag-grid.com/vue-getting-started/)
# 在Vue项目中开始使用ag-Grid
> ag-Grid的“ag”部分代表“不可知”。内部ag-Grid引擎在TypeScript中实现，具有零依赖性。 ag-Grid通过包装器组件支持Vue。包装器允许您在应用程序中使用ag-Grid，就像任何其他Vue组件一样 - 您通过属性绑定传递配置并通过事件绑定处理事件。您甚至可以使用Vue组件来自定义网格UI和单元格内容/行为。

> 在本文中，我们将引导您完成将ag-Grid添加到现有Vue项目的必要步骤，并配置它的一些[基本功能](https://www.ag-grid.com/features-overview/)。我们将向您展示网格的一些基本原理（传递属性，使用API​​等）。作为奖励，我们还将使用Sass变量调整网格的视觉外观。

## 将ag-Grid添加到您的项目中
出于本教程的目的，我们将使用角度CLI来构建Vue应用程序。如果您的项目具有不同的配置，请不要担心。 Ag-Grid及其Vue包装器作为NPM包分发，可以与任何常见的Vue项目模块捆绑器设置一起使用。让我们按照Vue CLI说明操作 - 在终端中运行以下命令：
```json
    npm install -g @vue/cli
    vue create my-project    # accept the defaults for all prompts
    cd my-project
    npm run serve
```
如果一切顺利，npm run serve已经启动了Web服务器。您可以在localhost：8080打开默认应用程序。
<br>
下一步，让我们添加ag-Grid NPM软件包。在我的项目中运行以下命令（您可能需要一个新的终端实例）：
```json
    npm install --save ag-grid-community ag-grid-vue
```
经过几秒钟的等待，这都不是事儿。让我们来实际编码吧！作为第一步，让我们添加ag-Grid ag-Grid样式 - 在src / main.js中导入它们：
```json
    import "../node_modules/ag-grid-community/dist/styles/ag-grid.css";
    import "../node_modules/ag-grid-community/dist/styles/ag-theme-balham.css";
```
上面的代码导入了网格“结构”样式表（ag-grid.css），以及一个可用的网格主题：（ag-theme-balham.css）。网格有几个不同的主题;选择一个与您的项目设计相匹配的。

<icon class='iconfont gy-sound-fill'></icon>
`在后面的部分中，我们将介绍如何使用SCSS自定义主题外观，这是我们推荐的方法。`
这将是一个简单的例子，我们可以删除src / components目录。我们的示例应用程序将存在于src / App.vue中。
<br>
我们将组件定义添加到模板中。编辑app / App.vue并替换脚手架代码：
```html
<template>
    <ag-grid-vue style="width: 500px; height: 500px;"
                 class="ag-theme-balham"
                 :columnDefs="columnDefs"
                 :rowData="rowData">
    </ag-grid-vue>
</template>
```
接下来，让我们声明基本的网格配置。编辑src / App.vue：
```js
<script>
    import {AgGridVue} from "ag-grid-vue";

    export default {
        name: 'App',
        data() {
            return {
                columnDefs: null,
                rowData: null
            }
        },
        components: {
            AgGridVue
        },
        beforeMount() {
            this.columnDefs = [
                {headerName: 'Make', field: 'make'},
                {headerName: 'Model', field: 'model'},
                {headerName: 'Price', field: 'price'}
            ];

            this.rowData = [
                {make: 'Toyota', model: 'Celica', price: 35000},
                {make: 'Ford', model: 'Mondeo', price: 32000},
                {make: 'Porsche', model: 'Boxter', price: 72000}
            ];
        }
    }
</script>
```
上面的代码提供了网格的两个基本配置属性 - 列定义（columnDefs）和数据（rowData）。在我们的例子中，列定义包含三列;每个列条目指定要在表的主体中显示的标题标签和数据字段。
<br>
这是ag-grid组件定义，带有两个属性绑定 - rowData和columnDefs。该组件还接受标准DOM样式和类。我们将类设置为ag-theme-balham，它定义了网格主题。您可能已经注意到，CSS类与我们之前导入的CSS文件的名称相匹配。
<br>
如果一切按预期工作，您应该看到一个简单的网格，如截图中的网格：
 ![](https://www.ag-grid.com/getting-started/step1.png)

## 启用排序和筛选
到现在为止还挺好。但是能够对数据进行排序以帮助我们查看哪辆车最便宜/最贵是不是很好？好吧，在ag-Grid中启用排序实际上非常简单 - 您需要做的就是将enableSorting属性设置为组件。

```html
<ag-grid-vue style="width: 500px; height: 500px;"
             class="ag-theme-balham"
             :columnDefs="columnDefs"
             :rowData="rowData"
             :enableSorting="true">
</ag-grid-vue>
```
添加属性后，您应该能够通过单击列标题对网格进行排序。单击标题可以通过升序，降序和无排序来切换。
<br>
我们的应用程序没有太多行，因此查找数据相当容易。但是很容易想象一个真实世界的应用程序如何拥有数百个（甚至数十万个！）或行，包含许多列。在这样的数据集中，过滤是你的朋友。
<br>
与排序一样，启用过滤就像设置enableFilter属性一样简单
```html
<ag-grid-vue style="width: 500px; height: 500px;"
             class="ag-theme-balham"
             :columnDefs="columnDefs"
             :rowData="rowData"
             :enableSorting="true"
             :enableFilter="true">
</ag-grid-vue>
```
设置此属性后，当您将标题悬停时，网格将显示一个小列菜单图标。按下它将显示一个带有过滤UI的弹出窗口，您可以选择过滤器的类型和要过滤的文本。
![](https://www.ag-grid.com/getting-started/step2.png)

## 获取远程数据
用JavaScript显示硬编码数据不会让我们走得太远。在现实世界中，大多数时候，我们正在处理驻留在远程服务器上的数据。感谢React，实现这一点实际上非常简单。请注意，实际数据提取是在网格组件之外执行的 - 我们使用的是HTML5提取API。
<br>
现在，让我们删除硬编码数据并从远程服务器获取一个。编辑 `src / App.vue` 并添加以下fetch语句：
```js
beforeMount() {
    this.columnDefs = [
        {headerName: 'Make', field: 'make'},
        {headerName: 'Model', field: 'model'},
        {headerName: 'Price', field: 'price'}
    ];

    fetch('https://api.myjson.com/bins/15psn9')
        .then(result => result.json())
        .then(rowData => this.rowData = rowData);
}
```
远程数据与我们最初的数据相同，因此您不应该注意到对网格的任何实际更改。但是，如果打开开发人员工具，您将看到执行其他HTTP请求。
## 启用选择
作为一名程序员是一项繁忙的工作。就在我们认为完成任务时，经理会出现一系列新要求！事实证明，我们需要允许用户从网格中选择某些行，并将它们标记为系统中的标记。我们将把旗帜切换状态和持久性留给后端团队。在我们这方面，我们应该启用选择，然后获取所选记录并通过API调用将它们传递给远程服务端点。
<br>
幸运的是，使用ag-Grid，上述任务非常简单。您可能已经猜到，这只是添加和更改几个属性的问题。
```html
<template>
    <ag-grid-vue style="width: 500px; height: 500px;"
                 class="ag-theme-balham"
                 :columnDefs="columnDefs"
                 :rowData="rowData"
                 :enableSorting="true"
                 :enableFilter="true"
                 rowSelection="multiple">
    </ag-grid-vue>
</template>

<script>
    import {AgGridVue} from "ag-grid-vue";

    export default {
        name: 'App',
        data() {
            return {
                columnDefs: null,
                rowData: null
            }
        },
        components: {
            AgGridVue
        },
        beforeMount() {
            this.columnDefs = [
                {headerName: 'Make', field: 'make', checkboxSelection: true},
                {headerName: 'Model', field: 'model'},
                {headerName: 'Price', field: 'price'}
            ];

            fetch('https://api.myjson.com/bins/15psn9')
                .then(result => result.json())
                .then(rowData => this.rowData = rowData);
        }
    }
</script>

<style>
</style>
```
接下来，让我们启用多行选择，以便用户可以选择多行：
```html
<ag-grid-vue style="width: 500px; height: 500px;"
             class="ag-theme-balham"
             :columnDefs="columnDefs"
             :rowData="rowData"

             :enableSorting="true"
             :enableFilter="true"
             rowSelection="multiple">
</ag-grid-vue>
```
<icon class='iconfont gy-sound-fill'></icon>
`我们使用checkboxSelection：true为make列添加了一个复选框，然后启用了rowSelection =“multiple”的多行选择。`

Great！现在，第一列包含一个复选框，单击该复选框时，将选择该行。我们唯一需要添加的是一个获取所选数据并将其发送到服务器的按钮。为此，我们将使用ag-Grid API - 我们将在gridReady事件中存储对网格和列API的引用
<br>
为了测试这个，我们将添加一个获取所选数据并将其发送到服务器的按钮。让我们继续进行这些更改：
```html
<template>
    <div>
        <button @click="getSelectedRows()">Get Selected Rows</button>

        <ag-grid-vue style="width: 500px; height: 500px;"
                     class="ag-theme-balham"
                     :columnDefs="columnDefs"
                     :rowData="rowData"
                     :enableSorting="true"
                     :enableFilter="true"
                     rowSelection="multiple"

                     :gridReady="onGridReady">
        </ag-grid-vue>
    </div>
</template>

<script>
    import {AgGridVue} from "ag-grid-vue";

    export default {
        name: 'App',
        data() {
            return {
                columnDefs: null,
                rowData: null
            }
        },
        components: {
            AgGridVue
        },
        methods: {
            onGridReady(params) {
                this.gridApi = params.api;
                this.columnApi = params.columnApi;
            },
            getSelectedRows() {
                const selectedNodes = this.gridApi.getSelectedNodes();
                const selectedData = selectedNodes.map( node => node.data );
                const selectedDataStringPresentation = selectedData.map( node => node.make + ' ' + node.model).join(', ');
                alert(`Selected nodes: ${selectedDataStringPresentation}`);
            }
        },
        beforeMount() {
            this.columnDefs = [
                {headerName: 'Make', field: 'make', checkboxSelection: true},
                {headerName: 'Model', field: 'model'},
                {headerName: 'Price', field: 'price'}
            ];

            fetch('https://api.myjson.com/bins/15psn9')
                .then(result => result.json())
                .then(rowData => this.rowData = rowData);
        }
    }
</script>

<style>
</style>
```
好吧，我们有点作弊。呼叫提醒并不是对我们后端的调用。希望你能原谅我们这条捷径，以保持文章简洁明了。当然，在完成本教程后，您可以使用真实应用程序逻辑替换该位。
## 分组（企业）
<icon class='iconfont gy-sound-fill'></icon>
`Grouping is a feature exclusive to the enterprise version of ag-Grid.`

除了过滤和排序之外，分组是用户从大量数据中理解的另一种有效方式。在我们的例子中，数据并不多。让我们切换到稍大的数据集：
```js
beforeMount() {
    this.columnDefs = [
        {headerName: 'Make', field: 'make', checkboxSelection: true},
        {headerName: 'Model', field: 'model'},
        {headerName: 'Price', field: 'price'}
    ];

-    fetch('https://api.myjson.com/bins/15psn9')
-        .then(result => result.json())
-        .then(rowData => this.rowData = rowData);
+    fetch('https://api.myjson.com/bins/ly7d1')
+        .then(result => result.json())
+        .then(rowData => this.rowData = rowData);
}
```
然后，让我们启用ag-grid的企业功能。安装附加包：
```js
npm install --save ag-grid-enterprise
```
然后，将导入添加到src / main.js：
```js
import Vue from 'vue'

import "../node_modules/ag-grid/dist/styles/ag-grid.css";
import "../node_modules/ag-grid/dist/styles/ag-theme-balham.css";

+import 'ag-grid-enterprise';

import App from './App'
```
如果一切正常，您应该在控制台中看到一条消息，警告您缺少企业许可证。除此之外，网格还有一些UI改进 - 自定义上下文菜单和更高级的列菜单弹出窗口 - 随意环顾四周：